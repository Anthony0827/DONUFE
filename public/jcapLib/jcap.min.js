var minutos = 15;

function click(e) {
  minutos_transcurridos = 0;
}

function keydown(e) {
  minutos_transcurridos = 0;
}

function keyup(e) {
  minutos_transcurridos = 0;
}

function comprobarsession() {
  minutos_transcurridos++,
    minutos_transcurridos >= minutos &&
      ((obj = new smajax(
        "POST",
        "..public/cerrarsesion.php",
        "pagina",
        "menu_datos_ajax",
        "menu_datos_ajax"
      )),
      (obj.vfuncion = "backindex();"),
      obj.ejecutasmajax()),
    setTimeout(comprobarsession, 6e4);
}

// JavaScript
function mostrarAlertUsuario(tipo, mensaje, duracion) {
    // Configurar el fondo y el icono según el tipo de alerta
    let fondoAlert;
    let iconoAlerta;
    if (tipo === "info") {
        fondoAlert = "bg-yellow3";
        iconoAlerta = "bi bi-info-circle";
        colorBorde = "border-kulture-yellow";
    } else if (tipo === "success") {
        fondoAlert = "bg-green-100";
        iconoAlerta = "bi bi-check-circle";
        colorBorde = "border-kulture-green";
    } else if (tipo === "danger") {
        fondoAlert = "bg-kulture-color-cuatro-2";
        iconoAlerta = "bi bi-exclamation-triangle";
        colorBorde = "border-kulture-color-cuatro-2";
    }

    // Crear el HTML del diálogo y su contenido
    let dialogHTML = `
        <dialog class="dialog">
            <div class="${fondoAlert} flex justify-between p-4 max-w-md info ${tipo} border ${colorBorde}">
                <span id="icoMensaje" class="${iconoAlerta} mr-2 my-auto"></span>
                <span>${mensaje}</span>
                <button type="button" class="close justify-end" aria-label="Cerrar" onclick="cerrarPopup()"><i class="bi bi-file-excel"></i>
                </button>
            </div>
        </dialog>
    `;

    // Insertar el HTML del diálogo en el DOM
    document.body.insertAdjacentHTML('beforeend', dialogHTML);

    // Mostrar el diálogo
    let dialog = document.querySelector(".dialog");
    dialog.showModal();

    // Ocultar el diálogo después de un tiempo (si se proporciona)
    if (duracion) {
        setTimeout(function() {
            cerrarPopup();
        }, duracion);
    }
}

function cerrarPopup() {
    // Cerrar el diálogo
    let dialog = document.querySelector(".dialog");
    dialog.close();
}

function Esconde_Muestra_celda_menu(e) {
  var t = document.getElementById(e);

  null !== t &&
    ((e = "none" === t.style.display), (t.style.display = e ? "" : "none"));
}

function BuscarProg(e, t, n, a) {
  (document.getElementById("menu_programa").value = e),
    (document.getElementById("modulo_selec").value = n),
    (document.getElementById("menu_programa_selec").value = t),
    (document.getElementById("archivoayuda").value = a),
    (document.getElementById("param").value = "");

  var r = t;

  $.post("index_datos.php", $("#pagina").serialize(), function (e) {
    try {
      $("#contenido_programa").html(e);
    } catch (e) {
      mostrarMensaje(
        "Error al cargar la pagina. Si este error persiste comuníquese con el Administrador del Sistema"
      ),
        setTimeout(ocultarMensaje, 1e3),
        console.log(e);
    }

    agregarHandlerCalendario(),
      $("#celda_menu_central_3 .activo .glyphicon").remove(),
      $("#celda_menu_central_3 .activo, #menu_sistemas .activo").removeClass(
        "activo"
      );

    var t,
      n = document.getElementById("tdp" + r);

    n &&
      ((t = n.parentNode.parentNode.id.replace("menu_sistema_", "")),
      $('#menu_sistemas a[idsistema="' + t + '"]').addClass("activo"),
      $(n).prepend('<span class="glyphicon glyphicon-chevron-right"></span>'),
      $(n.parentNode).addClass("activo"));
  });
}

function BuscarPrograma(e, t) {
  (document.getElementById("menu_programa").value = e),
    (document.getElementById("param").value = t),
    $.post("index_datos.php", $("#pagina").serialize(), function (e) {
      try {
        $("#contenido_programa").html(e);
      } catch (e) {
        mostrarMensaje(
          "Error al cargar la pagina. Si este error persiste comuníquese con el Administrador del Sistema"
        ),
          setTimeout(ocultarMensaje, 1e3),
          console.log(e);
      }
    });
}

function getContentModel(e, a, r) {
  return new Promise(function (t, n) {
    (Model[e] && Model[e].length) ||
      ((document.getElementById("menu_programa").value = a),
      (document.getElementById("param").value = r),
      $.post(
        "index_datos.php",
        $("#pagina").serialize(),
        function (e) {
          try {
            t(JSON.parse(e));
          } catch (e) {
            console.error(e), n(e);
          }
        },
        "json"
      ));
  });
}

$(function () {
  var e = document.layers ? 1 : 0,
    a = (document.all, $(".navbar-toggle")),
    r = $("#cuerpo"),
    t = $(".j2d-toggle"),
    o = $(".menuGlyphicon");

  $("#contenido_programa");

  function s(e) {
    r.toggleClass("js-nav"),
      t.toggleClass("in"),
      o.toggleClass("glyphicon-arrow-left"),
      o.toggleClass("glyphicon-arrow-right"),
      e && e.preventDefault();
  }

  (document.onkeydown = keydown),
    (document.onkeyup = keyup),
    (document.onclick = click),
    e &&
      (document.captureevents(event.keydown | event.keyup),
      document.captureevents(event.click)),
    (update = function (e) {
      e = e || 0;

      var t = document.getElementById("tbl_menu_central").offsetHeight + 25,
        n =
          window.innerHeight ||
          document.documentElement.clientHeight ||
          document.body.clientHeight,
        t = Math.max(t, n - 90, e),
        e = document.getElementById("inner-cuerpo");

      (e.style.minHeight = t + "px"),
        768 < document.documentElement.clientWidth
          ? document.getElementById("sistemas").clientHeight
          : (r.removeClass("js-nav"),
            o.toggleClass("glyphicon-arrow-left"),
            o.toggleClass("glyphicon-arrow-right"),
            (e.style.marginTop = ""));
    }),
    t.on("click", function () {
      s();
    }),
    $("#menu_sistemas a[idsistema]").on("click", function (e) {
      $("#menu_sistemas a.activo").removeClass("activo");

      var t,
        n = $(this).addClass("activo").attr("idsistema");

      isNaN(Number(n)) ||
        ((t = $(".menu-sistema:visible").attr("id")),
        $(".menu-sistema").hide(),
        $("#menu_sistema_" + n).show(),
        (t && t != "menu_sistema_" + n && 0 != $(".js-nav").length) || s()),
        e.preventDefault(),
        window.scrollTo(0, 0),
        a.is(":visible") && a.click();
    }),
    $("#x-contenido").on("keydown", ".teclas-accion", function (e) {
      var t;

      (13 != e.keyCode && 9 != e.keyCode) ||
        ((t = $(this).closest("table")),
        $("input.b_b2", t).click(),
        e.preventDefault());
    });
});

var tmp_menu = "";

function mostrar_menu(e) {
  "" === tmp_menu ||
    (null !== (t = document.getElementById(tmp_menu)) &&
      (t.style.display = "none"));

  var t,
    n = document.getElementById(e);

  null !== n &&
    ((t = "none" === n.style.display), (n.style.display = t ? "" : "none")),
    (tmp_menu = e);
}

function MostrarCeldas(e) {
  e = document.getElementById(e);

  "" === e.style.display ? (e.style.display = "none") : (e.style.display = "");
}

function cerrarsession() {
  (obj = new smajax(
    "POST",
    "../public/cerrarsesion.php",
    "pagina",
    "menu_datos_ajax",
    "menu_datos_ajax"
  )),
    (obj.vfuncion = "backindex();"),
    obj.ejecutasmajax();
}

function backindex() {
  var e;

  null != document.getElementById("idusuario") &&
    (document.getElementById("idusuario").value = ""),
    null != document.getElementById("menu_programa") &&
      (document.getElementById("menu_programa").value = ""),
    null != document.getElementById("menu_ticket") &&
      (document.getElementById("menu_ticket").value = ""),
    null != document.getElementById("idorganismo") &&
      (document.getElementById("idorganismo").value = ""),
    null != document.getElementById("loginusuario") &&
      (document.getElementById("loginusuario").value = ""),
    null != document.getElementById("menu_idorganismooficina") &&
      (document.getElementById("menu_idorganismooficina").value = ""),
    null != document.getElementById("menu_param") &&
      (document.getElementById("menu_param").value = ""),
    null != document.getElementById("pagina")
      ? (((e = document.getElementById("pagina")).action = "../"), e.submit())
      : (window.location = "../");
}

function abrir_ventana(e, t) {
  e = limpiarURL(decodeBase64(e).trim());

  e = window.open(
    e,
    "_blank",
    "status=0,toolbar=0,scrollbars=1,width=1024,height=600"
  );

  $(e.document).on("click keydown keyup", function (e) {
    window.opener.click && window.opener.click(e);
  });
}

function ExportarTabla(e, t, n) {
  for (
    datos = "", filas = t;
    filas < document.getElementById(e).rows.length - Math.abs(n);
    filas++
  ) {
    for (
      celdas = 0;
      celdas < document.getElementById(e).rows[filas].cells.length;
      celdas++
    )
      (texto = String(
        document.getElementById(e).rows[filas].cells[celdas].innerHTML
      )),
        (texto = texto.toLowerCase()),
        (ntexto = texto.replace("<input", "")),
        ntexto == texto &&
          (datos =
            datos +
            document.getElementById(e).rows[filas].cells[celdas].innerHTML +
            "*$*");

    datos += "*@*";
  }

  (datos = htmlstrip_csm(datos)),
    (datos = strreplace("&", "||amp||", datos)),
    (datos = datos.toUpperCase());

  t = document.createElement("iframe");

  (t.width = 0),
    (t.height = 0),
    (t.style.display = "none"),
    (t.style.visibility = "hidden"),
    (t.src = "../jcapLib/jcap.php?datos_xls_array=" + datos),
    document.getElementById("tmensaje").appendChild(t);
}

function htmlstrip_csm(e) {
  return (
    (e = strreplace("<br>", "", (e = (e = String(e)).toLowerCase()))),
    (e = strreplace("<input>", "", e)),
    (e = strreplace("<li>", "", e)),
    (e = strreplace("<b>", "", e)),
    (e = strreplace("</b>", "", e)),
    (e = strreplace("&nbsp;", " ", e)),
    (e = strreplace("<hr>", "", e)),
    (e = strreplace("<strong>", "", e)),
    (e = strreplace("</strong>", "", e)),
    (e = strreplace('<div style="overflow: auto; height: 40px">', "", e)),
    (e = strreplace("</div>", "", e)),
    (e = strreplace("<a href=\"javascript:fnceliminar('", "", e)),
    (e = strreplace("');\">", " - ", e)),
    (e = strreplace("</a>", "", e)),
    (e = strreplace('<label class="textorojo">', "", e)),
    (e = strreplace("</label>", "", e))
  );
}

function htmlConvert(e) {
  return (
    (e = strreplace("á", "&aacute;", (e = String(" " + e)))),
    (e = strreplace("Á", "&Aacute;", e)),
    (e = strreplace("é", "&eacute;", e)),
    (e = strreplace("É", "&Eacute;", e)),
    (e = strreplace("í", "&iacute;", e)),
    (e = strreplace("Í", "&Iacute;", e)),
    (e = strreplace("ó", "&oacute;", e)),
    (e = strreplace("Ó", "&Oacute;", e)),
    (e = strreplace("Ö", "&Ouml;", e)),
    (e = strreplace("ú", "&uacute;", e)),
    (e = strreplace("ü", "&uuml;", e)),
    (e = strreplace("Ú", "&Uacute;", e)),
    (e = strreplace("Ü", "&Uuml;", e)),
    (e = strreplace("ñ", "&ntilde;", e)),
    (e = strreplace("Ñ", "&Ntilde;", e)),
    (e = strreplace('"', "", e)),
    (e = strreplace("'", "", e)),
    (e = strreplace('"', "", e)),
    (e = strreplace("`", "", e)),
    (e = strreplace("´", "", e)),
    (e = strreplace("Ã", "&iacute;", e)),
    (e = strreplace("Â", "", e)),
    (e = strreplace("¿", "&#191;", e)),
    (e = strreplace("?", "&#63;", e)),
    (e = strreplace("¡", "&#161;", e)),
    (e = strreplace("!", "&#33;", e)),
    (e = strreplace("°", "&#176;", e)),
    (e = strreplace("º", "&#186;", e)),
    (e = strreplace("ª", "&#170;", e)).trim()
  );
}

function htmlEntities(e) {
  return (
    (e = strreplace("&ntilde;", "ñ", (e = String(" " + e)))),
    (e = strreplace("&Ntilde;", "Ñ", e)),
    (e = strreplace("&amp;", "&", e)),
    (e = strreplace("&Ntilde;", "Ñ", e)),
    (e = strreplace("&ntilde;", "ñ", e)),
    (e = strreplace("&Ntilde;", "Ñ", e)),
    (e = strreplace("&Agrave;", "À", e)),
    (e = strreplace("&Aacute;", "Á", e)),
    (e = strreplace("&Acirc;", "Â", e)),
    (e = strreplace("&Atilde;", "Ã", e)),
    (e = strreplace("&Auml;", "Ä", e)),
    (e = strreplace("&Aring;", "Å", e)),
    (e = strreplace("&AElig;", "Æ", e)),
    (e = strreplace("&Ccedil;", "Ç", e)),
    (e = strreplace("&Egrave;", "È", e)),
    (e = strreplace("&Eacute;", "É", e)),
    (e = strreplace("&Ecirc;", "Ê", e)),
    (e = strreplace("&Euml;", "Ë", e)),
    (e = strreplace("&Igrave;", "Ì", e)),
    (e = strreplace("&Iacute;", "Í", e)),
    (e = strreplace("&Icirc;", "Î", e)),
    (e = strreplace("&Iuml;", "Ï", e)),
    (e = strreplace("&ETH;", "Ð", e)),
    (e = strreplace("&Ntilde;", "Ñ", e)),
    (e = strreplace("&Ograve;", "Ò", e)),
    (e = strreplace("&Oacute;", "Ó", e)),
    (e = strreplace("&Ocirc;", "Ô", e)),
    (e = strreplace("&Otilde;", "Õ", e)),
    (e = strreplace("&Ouml;", "Ö", e)),
    (e = strreplace("&Oslash;", "Ø", e)),
    (e = strreplace("&Ugrave;", "Ù", e)),
    (e = strreplace("&Uacute;", "Ú", e)),
    (e = strreplace("&Ucirc;", "Û", e)),
    (e = strreplace("&Uuml;", "Ü", e)),
    (e = strreplace("&Yacute;", "Ý", e)),
    (e = strreplace("&THORN;", "Þ", e)),
    (e = strreplace("&szlig;", "ß", e)),
    (e = strreplace("&agrave;", "à", e)),
    (e = strreplace("&aacute;", "á", e)),
    (e = strreplace("&acirc;", "â", e)),
    (e = strreplace("&atilde;", "ã", e)),
    (e = strreplace("&auml;", "ä", e)),
    (e = strreplace("&aring;", "å", e)),
    (e = strreplace("&aelig;", "æ", e)),
    (e = strreplace("&ccedil;", "ç", e)),
    (e = strreplace("&egrave;", "è", e)),
    (e = strreplace("&eacute;", "é", e)),
    (e = strreplace("&ecirc;", "ê", e)),
    (e = strreplace("&euml;", "ë", e)),
    (e = strreplace("&igrave;", "ì", e)),
    (e = strreplace("&iacute;", "í", e)),
    (e = strreplace("&icirc;", "î", e)),
    (e = strreplace("&iuml;", "ï", e)),
    (e = strreplace("&eth;", "ð", e)),
    (e = strreplace("&ntilde;", "ñ", e)),
    (e = strreplace("&ograve;", "ò", e)),
    (e = strreplace("&oacute;", "ó", e)),
    (e = strreplace("&ocirc;", "ô", e)),
    (e = strreplace("&otilde;", "õ", e)),
    (e = strreplace("&ouml;", "ö", e)),
    (e = strreplace("&oslash;", "ø", e)),
    (e = strreplace("&ugrave;", "ù", e)),
    (e = strreplace("&uacute;", "ú", e)),
    (e = strreplace("&ucirc;", "û", e)),
    (e = strreplace("&uuml;", "ü", e)),
    (e = strreplace("&yacute;", "ý", e)),
    (e = strreplace("&thorn;", "þ", e)),
    (e = strreplace("&yuml;", "ÿ", e)),
    (e = strreplace("&#191;", "¿", e)),
    (e = strreplace("&#63;", "?", e)),
    (e = strreplace("&#161;", "¡", e)),
    (e = strreplace("&#33;", "!", e)),
    (e = strreplace("&#176;", "°", e)),
    (e = strreplace("&#186;", "º", e)),
    (e = strreplace("&#170;", "ª", e)).trim()
  );
}

function Esconde_Muestra_Celda(e) {
  var t = document.getElementById(e);

  null !== t &&
    ((e = "none" == t.style.display), (t.style.display = e ? "" : "none"));
}

function EscondeCelda(e) {
  e = document.getElementById(e);

  null !== e && (e.style.display = "none");
}

function MostrarCelda(e) {
  e = document.getElementById(e);

  null !== e && (e.style.display = "");
}

var tmp1 = null;

function otrosfondo(e) {
  null !== tmp1 && (document.getElementById(tmp1).bgColor = ""),
    (document.getElementById(e).bgColor = "#C6E2FF"),
    (tmp1 = e);
}

var tmp = null,
  clasant = null;

function selregistro(e, t) {
  if (null !== tmp)
    for (n = 1; n <= t; n++)
      void 0 !== document.getElementById(tmp + n) &&
        (document.getElementById(tmp + n).className = clasant);

  (tmp = e),
    void 0 !== document.getElementById(e + "1") &&
      (clasant = document.getElementById(e + "1").className);

  for (var n = 1; n <= t; n++)
    void 0 !== document.getElementById(e + n) &&
      (document.getElementById(e + n).className = "filac");
}

function marca_registro(e, t) {
  for (i = 1; i <= t; i++)
    void 0 !== document.getElementById(e + i) &&
      (document.getElementById(e + i).className = "filac");
}

function ocultabotones() {
  document.getElementById("tabla_botones").style.display = "none";
}

function mensajecliente(e, t) {
  (btn = '<table width="5%" border="0" cellspacing="0" cellpadding="0">'),
    (btn += "<tr>"),
    (btn += '<td width="13" height="33"></td>'),
    (btn +=
      '<td width="99%" nowrap background="' +
      $url +
      'images/botones/bt_bg.gif" align="center">&raquo; ' +
      e +
      " &laquo; </td>"),
    (btn += '<td width="13"></td>'),
    (btn += "</tr>"),
    (btn += "</table>"),
    (document.getElemenetById(t).innerHTML = btn);
}

var tmp2 = null,
  clasant2 = null;

function selectmenu(e, t) {
  var n;

  null !== tmp2 &&
    void 0 !== (n = document.getElementById(tmp2)) &&
    (n.className = clasant2),
    (tmp2 = e),
    void 0 !== (n = document.getElementById(e)) &&
      ((clasant2 = n.className), (n.className = t));
}

function agregar_calendario(e) {
  Calendar.setup({
    inputField: e,

    ifFormat: "%d/%m/%Y",

    button: e,
  });
}

function Comparar_Fecha(e, t) {
  (e = document.getElementById(e).value),
    (t = document.getElementById(t).value);

  "/" == e.substring(1, 2) && (e = "0" + e),
    "/" == e.substring(4, 5) &&
      (e = e.substring(0, 3) + "0" + e.substring(3, 9)),
    "/" == t.substring(1, 2) && (t = "0" + t),
    "/" == t.substring(4, 5) &&
      (t = t.substring(0, 3) + "0" + t.substring(3, 9)),
    (dia1 = e.substring(0, 2)),
    (mes1 = e.substring(3, 5)),
    (anyo1 = e.substring(6, 10)),
    (dia2 = t.substring(0, 2)),
    (mes2 = t.substring(3, 5)),
    (anyo2 = t.substring(6, 10));

  return (
    (dia1 = parseInt(dia1, 10)),
    (dia2 = parseInt(dia2, 10)),
    (mes1 = parseInt(mes1, 10)),
    (mes2 = parseInt(mes2, 10)),
    (anyo1 = parseInt(anyo1, 10)),
    (anyo2 = parseInt(anyo2, 10)),
    !(anyo1 > anyo2) &&
      !(anyo1 == anyo2 && mes1 > mes2) &&
      !(anyo1 == anyo2 && mes1 == mes2 && dia1 > dia2)
  );
}

function fechalongitud(e) {
  "" !== e.value &&
    e.value.length < 10 &&
    0 < e.value.length &&
    (alert("por favor ingrese la fecha completa (dd/mm/aaaa)."), e.focus());
}

var primerslap = !1,
  segundoslap = !1;

function formateafecha(e) {
  var t,
    n,
    a,
    r = e.length;

  return (
    2 <= r && !1 === primerslap
      ? ((t = e.substr(0, 2)),
        (primerslap =
          !0 === IsNumeric(t) && t <= 31 && "00" != t
            ? ((e = e.substr(0, 2) + "/" + e.substr(3, 7)), !0)
            : ((e = ""), !1)))
      : (!1 === IsNumeric((t = e.substr(0, 1))) && (e = ""),
        r <= 2 &&
          (primerslap = !0) &&
          ((e = e.substr(0, 1)), (primerslap = !1))),
    5 <= r && !1 === segundoslap
      ? ((n = e.substr(3, 2)),
        (segundoslap =
          !0 === IsNumeric(n) && n <= 12 && "00" != n
            ? ((e = e.substr(0, 5) + "/" + e.substr(6, 4)), !0)
            : ((e = e.substr(0, 3)), !1)))
      : r <= 5 &&
        !0 === segundoslap &&
        ((e = e.substr(0, 4)), (segundoslap = !1)),
    7 <= r &&
      (!1 === IsNumeric((a = e.substr(6, 4))) ||
        (10 == r && (0 === a || a < 1900 || 2100 < a))) &&
      (e = e.substr(0, 6)),
    10 <= r &&
      ((t = (e = e.substr(0, 10)).substr(0, 2)),
      (n = e.substr(3, 2)),
      (a = e.substr(6, 4)) % 4 != 0 &&
        2 === n &&
        28 < t &&
        (e = e.substr(0, 2) + "/")),
    e
  );
}

function fechamayor(e, t) {
  var n,
    e = e.split("/");

  return (
    "" != t && (n = t.split("/")),
    parseInt(e[2]) > parseInt(n[2]) ||
      (parseInt(e[2]) == parseInt(n[2]) &&
        (parseInt(e[1]) > parseInt(n[1]) ||
          (parseInt(e[1]) == parseInt(n[1]) &&
            parseInt(e[0]) > parseInt(n[0]))))
  );
}

function muestra_fecha(e) {
  return (
    e &&
      2 < e.length &&
      ((sep = ""),
      -1 != e.search("-") && (sep = "-"),
      -1 != e.search("/") && (sep = "/"),
      0 < sep.length &&
        ((f = e.split(sep)), (e = f[2] + "/" + f[1] + "/" + f[0]))),
    e
  );
}

function calcular_edad(e, t) {
  if (10 != e.length) return 0;

  (f = e.split("/")), (ano_hoy = f[2]), (mes_hoy = f[1]), (dia_hoy = f[0]);

  var n = t.split("/");

  return 3 != n.length
    ? 0
    : ((e = parseInt(n[2])),
      isNaN(e)
        ? 0
        : ((t = parseInt(n[1])),
          isNaN(t)
            ? 0
            : ((n = parseInt(n[0])),
              isNaN(n)
                ? 0
                : (e <= 99 && (e += 1900),
                  (edad = ano_hoy - e - 1),
                  !(mes_hoy + 1 - t < 0) &&
                  (0 < mes_hoy + 1 - t || 0 <= dia_hoy - n)
                    ? edad + 1
                    : edad))));
}

function diasemana(e) {
  (f = e.split("/")),
    (y = Number(f[2])),
    (m = Number(f[1]) - 1),
    (d = Number(f[0]));

  e = new Array(
    "DOMINGO",
    "LUNES",
    "MARTES",
    "MIERCOLES",
    "JUEVES",
    "VIERNES",
    "SABADO"
  );

  return (dd = new Date(y, m, d, 0, 0, 0)), (dia = dd.getUTCDay()), e[dia];
}

function diaFechas(e, t) {
  var n = e,
    a = n.substr(0, 2),
    r = n.substr(3, 2),
    o = n.substr(6),
    e = t,
    n = e.substr(0, 2),
    t = e.substr(3, 2),
    e = e.substr(6),
    a = new Date(o + "," + r + "," + a),
    a = new Date(e + "," + t + "," + n).getTime() - a.getTime();

  return Math.floor(a / 864e5);
}

function fLimpiaCampos(e) {
  for (mat = e.split(","), long = mat.length, i = 1; i <= long; i++)
    null != document.getElementById(mat[i - 1]) &&
      (document.getElementById(mat[i - 1]).value = "");
}

function fDesactivaCampos(e) {
  for (mat = e.split(","), long = mat.length, i = 1; i <= long; i++)
    null != document.getElementById(mat[i - 1]) &&
      (document.getElementById(mat[i - 1]).disabled = "disabled");
}

function fActivaCampos(e) {
  for (mat = e.split(","), long = mat.length, i = 1; i <= long; i++)
    null != document.getElementById(mat[i - 1]) &&
      (document.getElementById(mat[i - 1]).disabled = "");
}

function fValidaCampos(cadena) {
  for (mat = cadena.split(","), long = mat.length, i = 1; i <= long; i++)
    if (eval('trim(document.getElementById("' + mat[i - 1] + '").value)==""'))
      return (
        (msg = document.getElementById(mat[i - 1]).getAttribute("mensaje")),
        null == msg && (msg = mat[i - 1]),
        eval('alert("El Campo ' + msg + ' no debe estar vacio");'),
        eval('document.getElementById("' + mat[i - 1] + '").focus();'),
        !1
      );
}

function fReadonlyCamposCadena(cadena) {
  for (mat = cadena.split(","), long = mat.length, i = 1; i <= long; i++)
    eval('document.getElementById("' + mat[i - 1] + '").readonly=true);');
}

function insertSelect(e, t, n) {
  var a = document.createElement("option");

  (a.text = n), (a.value = t);

  var r = document.getElementById(e);

  try {
    r.add(a, null);
  } catch (e) {
    r.add(a);
  }
}

function limpiaSelect(e) {
  var t = document.getElementById(e);

  if (0 < t.length) for (i = t.length - 1; 0 <= i; i--) t.remove(i);
}

function cmb_opcion(e, t) {
  return null == t
    ? document.getElementById(e).options[
        document.getElementById(e).selectedIndex
      ]
    : document.getElementById(e).options[t];
}

function buscar_option(e) {
  for (i = 0; i < document.getElementById(e).length; i++)
    if (document.getElementById(e).options[i].selected)
      return document.getElementById(e).options[i].text;
}

function del_option(e) {
  for (i = 0; i < document.getElementById(e).options.length; i++)
    if (document.getElementById(e).options[i].selected)
      return void document.getElementById(e).remove(i);

  alert("Debe seleccionar una opcion para borrar");
}

function buscar_atributo(e, t) {
  for (i = 0; i < document.getElementById(e).length; i++)
    if (document.getElementById(e).options[i].selected)
      return document.getElementById(e).options[i].getAttribute(t);
}

function cmb_indice(e, t) {
  for (var n = 0; n < document.getElementById(e).length; n++)
    if (cmb_opcion(e, n).value == t) return n + 1;

  return !1;
}

function cmb_agregar(e, t, n) {
  var a = document.getElementById(e).length + 1;

  (document.getElementById(e).length = a),
    (document.getElementById(e).options[a - 1].value = t),
    (document.getElementById(e).options[a - 1].text = n);
}

function cmb_limpiar(e, t, n) {
  null == n && (n = ""),
    (document.getElementById(e).innerHTML =
      '<select id="' +
      t +
      '" name="' +
      t +
      '" class="caja_tex"><option value="">&nbsp;</option></select>' +
      n);
}

function smajax(metodo, url, parametros, destino, objJson, mensaje) {
  var vmetodo = metodo,
    vurl = url,
    vparametros = parametros,
    vdestino = destino,
    vobjJson = objJson,
    vmensaje = mensaje,
    elementoMensaje = document.getElementById(mensaje),
    objeto = crearsmajax(),
    salida,
    vfuncion = "",
    tipos = [
      "button",
      "checkbox",
      "color",
      "date",
      "datetime",
      "email",
      "hidden",
      "month",
      "number",
      "datetime-local",
      "password",
      "radio",
      "range",
      "reset",
      "search",
      "submit",
      "tel",
      "text",
      "time",
      "url",
      "week",
      "select-multiple",
      "select-one",
      "textarea",
    ];

  function crearsmajax() {
    try {
      objetoajax = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
      try {
        objetoajax = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (e) {
        objetoajax = !1;
      }
    }

    return (
      objetoajax ||
        "undefined" == typeof XMLHttpRequest ||
        (objetoajax = new XMLHttpRequest()),
      objetoajax
    );
  }

  function ejecutasmajax() {
    var e;

    "GET" == vmetodo.toUpperCase() || "" == vmetodo
      ? ((e = vurl.length),
        "?" != vurl.substr(e - 1, 1)
          ? (vurl = vurl + "?" + vparametros)
          : (vurl += vparametros),
        objeto.open("GET", vurl, !0),
        objeto.send(""))
      : ((vparametros = generacampos()),
        objeto.open("POST", vurl, !0),
        objeto.setRequestHeader(
          "Content-type",
          "application/x-www-form-urlencoded"
        ),
        objeto.send(vparametros)),
      (vfuncion = this.vfuncion);
  }

  function tryParseJSON(e) {
    try {
      var t = JSON.parse(e);

      if (t && "object" == typeof t) return JSON.stringify(t);
    } catch (e) {}

    return !1;
  }

  function actualizasmajax() {
    if (
      ("function" == typeof mostrarMensaje
        ? 1 == objeto.readyState
          ? mostrarMensaje("Cargando...")
          : 2 == objeto.readyState
          ? mostrarMensaje("Enviando datos...")
          : 3 == objeto.readyState && mostrarMensaje("Recibiendo datos...")
        : elementoMensaje &&
          ((elementoMensaje.style.display = ""),
          1 == objeto.readyState
            ? (elementoMensaje.innerHTML = "Cargando...")
            : 2 == objeto.readyState
            ? (elementoMensaje.innerHTML = "Enviando datos...")
            : 3 == objeto.readyState &&
              (elementoMensaje.innerHTML = "Recibiendo datos...")),
      4 == objeto.readyState &&
        ("function" == typeof ocultarMensaje
          ? ocultarMensaje()
          : elementoMensaje &&
            ((elementoMensaje.innerHTML = "Operación terminada"),
            (elementoMensaje.style.display = "none")),
        200 == objeto.status))
    ) {
      if ("ME" != vdestino) {
        var eObjJson = tryParseJSON(objeto.responseText),
          eDestino = document.getElementById(vdestino);

        0 != eObjJson
          ? eval(vobjJson + "=" + eObjJson)
          : (eval(vobjJson + '=""'),
            eDestino && (eDestino.innerHTML = objeto.responseText));

        var arr_scripts = String(objeto.responseText).match(
          /(?!<script[^<]+>)[^<>]+?(?=<\/script>)/gim
        );

        if (null != arr_scripts)
          for (x_arr = 0; x_arr < arr_scripts.length; x_arr++)
            try {
              eval(arr_scripts[x_arr]);
            } catch (e) {
              console.log("Error:", e);
            }

        var tipov = typeof vfuncion;

        "string" === tipov && "" != vfuncion
          ? eval(vfuncion)
          : "function" === tipov && vfuncion();
      } else {
        if ("function" != typeof DeveloverValor)
          throw "No existe la función DeveloverValor";

        DeveloverValor(objeto.responseText);
      }

      "function" == typeof agregarHandlerCalendario &&
        agregarHandlerCalendario();
    }
  }

  function generacampos() {
    var e = document.getElementById(vparametros),
      t = e.elements.length,
      n = [];

    for (i = 0; i < t; i++) {
      var a = e.elements[i],
        r = a.type;

      if (0 <= tipos.indexOf(r)) {
        var o,
          s = a.name,
          l = a.value;

        if ("checkbox" == r)
          if (
            (1 < document.getElementsByName(s).length &&
              (o = s.lastIndexOf("[]")) < s.length - 2 &&
              (s += "[]"),
            !1 === a.checked)
          )
            continue;

        if ("radio" != r || a.checked)
          if ("select-multiple" != r)
            "date" != r ||
              ((r = /(\d{4})-(\d{2})-(\d{2})/g).test(l) &&
                ((r.lastIndex = 0),
                (l = (o = r.exec(l))[3] + "/" + o[2] + "/" + o[1]))),
              n.push(encodeURIComponent(s) + "=" + encodeURIComponent(l));
          else {
            (o = s.lastIndexOf("[]")) < s.length - 2 && (s += "[]");

            for (var c = 0; c < a.options.length; c++)
              a.options[c].selected &&
                n.push(
                  encodeURIComponent(s) +
                    "=" +
                    encodeURIComponent(a.options[c].value)
                );
          }
      }
    }

    return n.join("&");
  }

  (this.vfuncion = ""),
    (this.ejecutasmajax = ejecutasmajax),
    (objeto.onreadystatechange = actualizasmajax);
}

function agregar_valor() {
  (document.getElementById("txtcodigo").value = ""),
    (document.getElementById("txcodigosel").value = "");
}

function captura_campos(e) {
  var t = "",
    a = document.getElementById(e);

  for (n = a.elements.length, i = 0; i < n; i++)
    if (
      "hidden" == a.elements[i].type ||
      "text" == a.elements[i].type ||
      "textarea" == a.elements[i].type ||
      "checkbox" == a.elements[i].type ||
      "radio" == a.elements[i].type ||
      "select-one" == a.elements[i].type ||
      "password" == a.elements[i].type ||
      "date" == a.elements[i].type
    ) {
      if (
        ((nom = a.elements[i].name),
        (tip = a.elements[i].type),
        (val = a.elements[i].value),
        "checkbox" == a.elements[i].type &&
          0 == a.elements[i].checked &&
          (val = ""),
        "select-multiple" == tip)
      ) {
        for (val = "", x = 0; x < a.elements[i].options.length; x++)
          a.elements[i].options[x].selected &&
            (val = val + a.elements[i].options[x].value + ";");

        val = val.substr(0, val.length - 1);
      }

      t = "" != t ? t + "&" + nom + "=" + val : nom + "=" + val;
    }

  return t;
}

function abreVentana(e) {
  window.open(e, "", "status=0,toolbar=0,scrollbars=1,width=750,height=550");
}

var nav4 = !!window.Event;

function ValidaNumero(e, t) {
  var e = nav4 ? e.which : e.keyCode,
    n = String,
    a = String(""),
    r = String(t.value);

  if (e <= 13 || (48 <= e && e <= 57) || (96 <= e && e <= 105) || 188 == e) {
    for (x = 0; x <= r.length; x++)
      -1 < r.indexOf(".") &&
        (r =
          r.substr(0, r.indexOf(".")) + r.substr(r.indexOf(".") + 1, r.length));

    var o = r.length;

    if (-1 < r.indexOf(",")) {
      for (
        a = r.substr(r.indexOf(","), o),
          r = r.substr(0, r.indexOf(",")),
          o -= a.length,
          x = 0;
        x <= a.length;
        x++
      )
        -1 < a.indexOf(",") &&
          (a =
            a.substr(0, a.indexOf(",")) +
            a.substr(a.indexOf(",") + 1, a.length));

      a = "," + a;
    }

    var s = Number(o);

    for (x = 0; x < o && !((s -= 3) < 3); x++);

    for (n = r, x = o - 3; 0 < x; x -= 3)
      n = n.substr(0, x) + "." + n.substr(x, o - x + 7);

    n += a;
  } else
    (e = Number(e)),
      (n = (r = (r = r.toUpperCase()).replace(/(^\.*)|(\.*$)/g, "")).replace(
        n.fromCharCode(e),
        ""
      ));

  return n;
}

function devuelvenumero(e) {
  for (x = 0; x <= e.length; x++)
    -1 < e.indexOf(".") &&
      (e =
        e.substr(0, e.indexOf(".")) + e.substr(e.indexOf(".") + 1, e.length));

  return (e = e.replace(",", "."));
}

function dev_num(e) {
  var t = String(e);

  for (x = 0; x < t.length; x++) t = t.replace(".", "");

  return (t = t.replace(",", ".")), (e = parseFloat(t)), isNaN(e) && (e = 0), e;
}

function FormateaNumero(e) {
  e = Math.round(100 * e) / 100;

  var t = String,
    n = String(""),
    e = String(e),
    a = e.length;

  if (-1 < e.indexOf(".")) {
    for (
      n = e.substr(e.indexOf("."), a),
        e = e.substr(0, e.indexOf(".")),
        a -= n.length,
        x = 0;
      x <= n.length;
      x++
    )
      n = n.replace(".", "");

    n = "," + n;
  }

  var r = Number(a);

  for (x = 0; x < a && !((r -= 3) < 3); x++);

  for (t = e, x = a - 3; 0 < x; x -= 3)
    t = t.substr(0, x) + "." + t.substr(x, a - x + 7);

  return (t += n);
}

function FormateaNumeroCompleta(e) {
  e = Math.round(100 * e) / 100;

  var t = String,
    n = String(""),
    e = String(e),
    a = e.length;

  if (-1 < e.indexOf(".")) {
    for (
      n = e.substr(e.indexOf("."), a),
        e = e.substr(0, e.indexOf(".")),
        a -= n.length,
        x = 0;
      x <= n.length;
      x++
    )
      n = n.replace(".", "");

    1 == n.length && (n += "0"), (n = "," + n);
  } else n = ",00";

  var r = Number(a);

  for (x = 0; x < a && !((r -= 3) < 3); x++);

  for (t = e, x = a - 3; 0 < x; x -= 3)
    t = t.substr(0, x) + "." + t.substr(x, a - x + 7);

  return (t += n);
}

function FormateaNumeroDec(e, t) {
  (operador = "100000"),
    (operador = operador.substr(0, t + 1)),
    (e = Math.round(e * operador) / operador);

  var n = String,
    a = String(""),
    e = String(e),
    r = e.length;

  if (-1 < e.indexOf(".")) {
    for (
      a = e.substr(e.indexOf("."), r),
        e = e.substr(0, e.indexOf(".")),
        r -= a.length,
        x = 0;
      x <= a.length;
      x++
    )
      a = a.replace(".", "");

    a = "," + (a = a.substr(0, t));
  }

  var o = Number(r);

  for (x = 0; x < r && !((o -= 3) < 3); x++);

  for (n = e, x = r - 3; 0 < x; x -= 3)
    n = n.substr(0, x) + "." + n.substr(x, r - x + 7);

  return (n += a);
}

function ceroizquierda(e) {
  var t = String(e),
    e = String("0");

  return "" != t && t.length < 2 && 0 < t.length && (t = e + t), t;
}

function tecla_control(e) {
  e = nav4 ? e.which : e.keyCode;

  17 == e && (tctrl = e);
}

function IsNumeric(e) {
  var t = e.length,
    n = "S";

  for (x = 0; x < t; x++)
    (v1 = e.substr(x, 1)), (v2 = parseInt(v1)), isNaN(v2) && (n = "N");

  return "S" == n;
}

var primerslap = !1,
  segundoslap = !1;

function formateatelefono(e) {
  var t,
    n = e.length;

  return (
    4 <= n && 0 == primerslap
      ? ((t = e.substr(0, 4)),
        (primerslap =
          1 == IsNumeric(t)
            ? ((e = e.substr(0, 4) + "-" + e.substr(5, 7)), !0)
            : ((e = ""), !1)))
      : (0 == IsNumeric((t = e.substr(0, 4))) && (e = ""),
        n <= 4 &&
          (primerslap = !0) &&
          ((t = e.substr(0, 4)), (primerslap = !1))),
    6 <= n && 0 == segundoslap
      ? ((t = e.substr(5, 7)),
        (segundoslap =
          1 == IsNumeric(t)
            ? ((e = e.substr(0, 4) + "-" + e.substr(5, 7)), !0)
            : ((e = e.substr(0, 5)), !1)))
      : n <= 5 &&
        (primerslap = !1) &&
        ((e = e.substr(0, 4)), (segundoslap = !1)),
    e
  );
}

function formateahora(e) {
  var t = e.length;

  return (
    2 == t && (e = e.substr(0, 2) <= 24 ? e.substr(0, 2) + ":" : ""),
    5 <= t &&
      ((minuto = e.substr(3, 5)),
      (e = minuto <= 59 ? e.substr(0, 5) : e.substr(0, 2) + ":")),
    e
  );
}

var primers1 = !1,
  segundos2 = !1;

function formateaString(e, t, n) {
  var a = e.length;

  return (
    n <= a && 0 == primers1
      ? ((e = e.substr(0, n) + t + e.substr(n + 1)), (primers1 = !0))
      : a <= n && (primers1 = !0) && ((e = e.substr(0, n)), (primers1 = !1)),
    n + 2 <= a && 0 == segundos2
      ? ((e = e.substr(0, n) + t + e.substr(n + 1)), (segundos2 = !0))
      : a <= n + 1 &&
        (primers1 = !1) &&
        ((e = e.substr(0, n)), (segundos2 = !1)),
    e
  );
}

function decode_str(e) {
  return Utf8.decode(decodeBase64(e));
}

function longitudTexto(e, t) {
  "" != e.value &&
    e.value.length > t &&
    (alert("Ha Excedido la longitud para el campo =" + e.name),
    (e.value = e.value.substr(0, t)),
    e.focus());
}

function trim(e) {
  null == typeof e && (e = "");

  var t = e;

  try {
    return t.replace(/(^\s*)|(\s*$)/g, "");
  } catch (e) {
    return t;
  }
}

function cHTML(e) {
  String;

  return e.replace("&dddd;", "'").replace("&rrrr;", "`");
}

function RemChrEsp(e) {
  var t = String(e.value),
    n = (n = String).fromCharCode(13) + n.fromCharCode(10);

  (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = (t = t.replace(
    n,
    ""
  )).replace("'", "")).replace("'", "")).replace("'", "")).replace(
    " '",
    ""
  )).replace("' ", "")).replace("`", "")).replace("�", "")).replace(
    n,
    ""
  )).replace("^", "")).replace("|", "")).replace("�", "")),
    (e.value = t);
}

function sustituyecar(e, t, n) {
  return "" != t && "" != e
    ? ((xcadena = e), (fcadena = xcadena.replace(t, n)), fcadena)
    : e;
}

function fLimpiaCadena(e) {
  e.length;

  for (x = 0; x <= e.length / 2; x++)
    e = (e = (e = (e = e.replace('"', "")).replace("'", "")).replace(
      '"',
      ""
    )).replace("`", "");

  return e;
}

function longitud_max(e, t, n) {
  e = nav4 ? e.which : e.keyCode;

  if (t.value.length == n && 0 != e && 8 != e) return !1;
}

function strreplace(e, t, n) {
  for (var a = "", a = n; 0 < a.indexOf(e); ) a = a.replace(e, t);

  return a;
}

function NoEnter(e) {
  e = nav4 ? e.which : e.keyCode;

  return 13 != e && 34 != e && 39 != e;
}

function validaEnter(evt, nfunc) {
  var key = nav4 ? evt.which : evt.keyCode;

  13 == key && ((f = nfunc + ";"), eval(f));
}

function NoComillas(e) {
  e = nav4 ? e.which : e.keyCode;

  return 34 != e && 39 != e;
}

function AceptarNro(e) {
  e = nav4 ? e.which : e.keyCode;

  return e <= 13 || (48 <= e && e <= 57) || (96 <= e && e <= 105);
}

function esString(e, t) {
  return (
    (t_final = e.replace(
      /[^a-z\_\@\-\d\n\/\�\�\�\�\�\�\�\,\&\.\#\(\)\; ]+/gi,
      ""
    )),
    e.length != t_final.length &&
      (t.value = e.replace(
        /[^a-z\_\@\-\d\n\/\�\�\�\�\�\�\�\,\&\.\#\(\)\; ]+/gi,
        ""
      )),
    !0
  );
}

function esSimbolo(e, t) {
  return (
    (t_final = e.replace(
      /[^a-z\_\@\*\=\_\#\-\d\n\/\�\�\�\�\�\�\�\,\. ]+/gi,
      ""
    )),
    e.length != t_final.length &&
      (t.value = e.replace(
        /[^a-z\_\@\*\=\_\#\-\d\n\/\�\�\�\�\�\�\�\,\. ]+/gi,
        ""
      )),
    !0
  );
}

function esEmail(e, t) {
  var n,
    a,
    r = typeof e;

  if ("object" == r) (n = e.value), (a = e);
  else {
    if ("string" != r) return !1;

    (n = e), (a = t);
  }

  return (
    !!n &&
    (!!/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/gi.test(n) ||
      (alert("Debe ingresar una dirección de correo válida"),
      a.focus && a.focus(),
      !1))
  );
}

function AceptarLetras(e) {
  e = nav4 ? e.which : e.keyCode;

  return (13 < e && e < 48) || 57 < e || 8 == e || 0 == e;
}

function AceptarMonto(e) {
  e = nav4 ? e.which : e.keyCode;

  return e <= 13 || (48 <= e && e <= 57) || 44 == e || 46 == e;
}

function ValidarFecha(e) {
  var t = new String(e),
    n = (new Date(), new String(t.substring(0, t.indexOf("/")))),
    e = new String(t.substring(t.indexOf("/") + 1, t.lastIndexOf("/"))),
    t = new String(t.substring(t.lastIndexOf("/") + 1, t.length));

  return isNaN(t) || t.length < 4 || parseFloat(t) < 1900
    ? (alert("A�o inv�lido"), !1)
    : isNaN(e) || parseFloat(e) < 1 || 12 < parseFloat(e)
    ? (alert("Mes inv�lido"), !1)
    : (!(isNaN(n) || parseInt(n) < 1 || 31 < parseInt(n)) &&
        ((4 != e && 6 != e && 9 != e && 11 != e && 2 != e) ||
          !((2 == e && 28 < n) || 30 < n))) ||
      (alert("D�a inv�lido"), !1);
}

function ValidarCorreo(e) {
  return (
    !!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(
      e.value
    ) || (alert('El campo "Correo Electr�nico" es incorrecto'), e.focus(), !1)
  );
}

function ValidarUpload(e, t) {
  if (
    ((extArray = ""),
    (file = e.value),
    1 == t && (extArray = new Array(".gif", ".jpg", ".png")),
    2 == t && (extArray = new Array(".swf")),
    3 == t &&
      (extArray = new Array(
        ".exe",
        ".sit",
        ".zip",
        ".tar",
        ".swf",
        ".mov",
        ".hqx",
        ".ra",
        ".wmf",
        ".mp3",
        ".qt",
        ".med",
        ".et"
      )),
    4 == t &&
      (extArray = new Array(
        ".mov",
        ".ra",
        ".wmf",
        ".mp3",
        ".qt",
        ".med",
        ".et",
        ".wav"
      )),
    5 == t && (extArray = new Array(".html", ".htm", ".shtml")),
    6 == t && (extArray = new Array(".doc", ".xls", ".ppt")),
    (allowSubmit = !1),
    file)
  ) {
    for (; -1 != file.indexOf("\\"); )
      file = file.slice(file.indexOf("\\") + 1);

    ext = file.slice(file.indexOf(".")).toLowerCase();

    for (var n = 0; n < extArray.length; n++)
      if (extArray[n] == ext) {
        allowSubmit = !0;

        break;
      }

    allowSubmit ||
      ((e.value = ""),
      alert(
        "Usted s�lo puede subir archivos con extensiones " +
          extArray.join(" ") +
          "\nPor favor seleccione un nuevo archivo"
      ));
  }
}

function urlDecode(e) {
  return (e = e.replace(new RegExp("\\+", "g"), " ")), unescape(e);
}

function urlEncode(e) {
  return (e = (e = escape(e)).replace(new RegExp("\\+", "g"), "%2B")).replace(
    new RegExp("%20", "g"),
    "+"
  );
}

for (
  var END_OF_INPUT = -1,
    base64Chars = new Array(
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "0",
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
      "+",
      "/"
    ),
    reverseBase64Chars = new Array(),
    i = 0,
    base64Str,
    base64Count;
  i < base64Chars.length;
  i++
)
  reverseBase64Chars[base64Chars[i]] = i;

function setBase64Str(e) {
  (base64Str = e), (base64Count = 0);
}

function readBase64() {
  if (!base64Str) return END_OF_INPUT;

  if (base64Count >= base64Str.length) return END_OF_INPUT;

  var e = 255 & base64Str.charCodeAt(base64Count);

  return base64Count++, e;
}

function encodeBase64(e) {
  setBase64Str(e);

  for (
    var t = "", n = new Array(3), a = 0, r = !1;
    !r && (n[0] = readBase64()) != END_OF_INPUT;

  )
    (n[1] = readBase64()),
      (n[2] = readBase64()),
      (t += base64Chars[n[0] >> 2]),
      n[1] != END_OF_INPUT
        ? ((t += base64Chars[((n[0] << 4) & 48) | (n[1] >> 4)]),
          n[2] != END_OF_INPUT
            ? ((t += base64Chars[((n[1] << 2) & 60) | (n[2] >> 6)]),
              (t += base64Chars[63 & n[2]]))
            : ((t += base64Chars[(n[1] << 2) & 60]), (t += "="), (r = !0)))
        : ((t += base64Chars[(n[0] << 4) & 48]),
          (t += "="),
          (t += "="),
          (r = !0)),
      76 <= (a += 4) && ((t += "\n"), (a = 0));

  return t;
}

function readReverseBase64() {
  if (!base64Str) return END_OF_INPUT;

  for (;;) {
    if (base64Count >= base64Str.length) return END_OF_INPUT;

    var e = base64Str.charAt(base64Count);

    if ((base64Count++, reverseBase64Chars[e])) return reverseBase64Chars[e];

    if ("A" == e) return 0;
  }

  return END_OF_INPUT;
}

function ntos(e) {
  return (
    1 == (e = e.toString(16)).length && (e = "0" + e),
    (e = "%" + e),
    unescape(e)
  );
}

function decodeBase64(e) {
  setBase64Str(e);

  for (
    var t = "", n = new Array(4), a = !1;
    !a &&
    (n[0] = readReverseBase64()) != END_OF_INPUT &&
    (n[1] = readReverseBase64()) != END_OF_INPUT;

  )
    (n[2] = readReverseBase64()),
      (n[3] = readReverseBase64()),
      (t += ntos(((n[0] << 2) & 255) | (n[1] >> 4))),
      n[2] != END_OF_INPUT
        ? ((t += ntos(((n[1] << 4) & 255) | (n[2] >> 2))),
          n[3] != END_OF_INPUT
            ? (t += ntos(((n[2] << 6) & 255) | n[3]))
            : (a = !0))
        : (a = !0);

  return t;
}

var digitArray = new Array(
  "0",
  "1",
  "2",
  "3",
  "4",
  "5",
  "6",
  "7",
  "8",
  "9",
  "a",
  "b",
  "c",
  "d",
  "e",
  "f"
);

function toHex(e) {
  for (var t = "", n = !0, a = 32; 0 < a; ) {
    var r = (e >> (a -= 4)) & 15;

    (n && 0 == r) || ((n = !1), (t += digitArray[r]));
  }

  return "" == t ? "0" : t;
}

function pad(e, t, n) {
  for (var a = e, r = e.length; r < t; r++) a = n + a;

  return a;
}

function encodeHex(e) {
  for (var t = "", n = 0; n < e.length; n++)
    t += pad(toHex(255 & e.charCodeAt(n)), 2, "0");

  return t;
}

var hexv = {
  "00": 0,

  "01": 1,

  "02": 2,

  "03": 3,

  "04": 4,

  "05": 5,

  "06": 6,

  "07": 7,

  "08": 8,

  "09": 9,

  "0A": 10,

  "0B": 11,

  "0C": 12,

  "0D": 13,

  "0E": 14,

  "0F": 15,

  10: 16,

  11: 17,

  12: 18,

  13: 19,

  14: 20,

  15: 21,

  16: 22,

  17: 23,

  18: 24,

  19: 25,

  "1A": 26,

  "1B": 27,

  "1C": 28,

  "1D": 29,

  "1E": 30,

  "1F": 31,

  20: 32,

  21: 33,

  22: 34,

  23: 35,

  24: 36,

  25: 37,

  26: 38,

  27: 39,

  28: 40,

  29: 41,

  "2A": 42,

  "2B": 43,

  "2C": 44,

  "2D": 45,

  "2E": 46,

  "2F": 47,

  30: 48,

  31: 49,

  32: 50,

  33: 51,

  34: 52,

  35: 53,

  36: 54,

  37: 55,

  38: 56,

  39: 57,

  "3A": 58,

  "3B": 59,

  "3C": 60,

  "3D": 61,

  "3E": 62,

  "3F": 63,

  40: 64,

  41: 65,

  42: 66,

  43: 67,

  44: 68,

  45: 69,

  46: 70,

  47: 71,

  48: 72,

  49: 73,

  "4A": 74,

  "4B": 75,

  "4C": 76,

  "4D": 77,

  "4E": 78,

  "4F": 79,

  50: 80,

  51: 81,

  52: 82,

  53: 83,

  54: 84,

  55: 85,

  56: 86,

  57: 87,

  58: 88,

  59: 89,

  "5A": 90,

  "5B": 91,

  "5C": 92,

  "5D": 93,

  "5E": 94,

  "5F": 95,

  60: 96,

  61: 97,

  62: 98,

  63: 99,

  64: 100,

  65: 101,

  66: 102,

  67: 103,

  68: 104,

  69: 105,

  "6A": 106,

  "6B": 107,

  "6C": 108,

  "6D": 109,

  "6E": 110,

  "6F": 111,

  70: 112,

  71: 113,

  72: 114,

  73: 115,

  74: 116,

  75: 117,

  76: 118,

  77: 119,

  78: 120,

  79: 121,

  "7A": 122,

  "7B": 123,

  "7C": 124,

  "7D": 125,

  "7E": 126,

  "7F": 127,

  80: 128,

  81: 129,

  82: 130,

  83: 131,

  84: 132,

  85: 133,

  86: 134,

  87: 135,

  88: 136,

  89: 137,

  "8A": 138,

  "8B": 139,

  "8C": 140,

  "8D": 141,

  "8E": 142,

  "8F": 143,

  90: 144,

  91: 145,

  92: 146,

  93: 147,

  94: 148,

  95: 149,

  96: 150,

  97: 151,

  98: 152,

  99: 153,

  "9A": 154,

  "9B": 155,

  "9C": 156,

  "9D": 157,

  "9E": 158,

  "9F": 159,

  A0: 160,

  A1: 161,

  A2: 162,

  A3: 163,

  A4: 164,

  A5: 165,

  A6: 166,

  A7: 167,

  A8: 168,

  A9: 169,

  AA: 170,

  AB: 171,

  AC: 172,

  AD: 173,

  AE: 174,

  AF: 175,

  B0: 176,

  B1: 177,

  B2: 178,

  B3: 179,

  B4: 180,

  B5: 181,

  B6: 182,

  B7: 183,

  B8: 184,

  B9: 185,

  BA: 186,

  BB: 187,

  BC: 188,

  BD: 189,

  BE: 190,

  BF: 191,

  C0: 192,

  C1: 193,

  C2: 194,

  C3: 195,

  C4: 196,

  C5: 197,

  C6: 198,

  C7: 199,

  C8: 200,

  C9: 201,

  CA: 202,

  CB: 203,

  CC: 204,

  CD: 205,

  CE: 206,

  CF: 207,

  D0: 208,

  D1: 209,

  D2: 210,

  D3: 211,

  D4: 212,

  D5: 213,

  D6: 214,

  D7: 215,

  D8: 216,

  D9: 217,

  DA: 218,

  DB: 219,

  DC: 220,

  DD: 221,

  DE: 222,

  DF: 223,

  E0: 224,

  E1: 225,

  E2: 226,

  E3: 227,

  E4: 228,

  E5: 229,

  E6: 230,

  E7: 231,

  E8: 232,

  E9: 233,

  EA: 234,

  EB: 235,

  EC: 236,

  ED: 237,

  EE: 238,

  EF: 239,

  F0: 240,

  F1: 241,

  F2: 242,

  F3: 243,

  F4: 244,

  F5: 245,

  F6: 246,

  F7: 247,

  F8: 248,

  F9: 249,

  FA: 250,

  FB: 251,

  FC: 252,

  FD: 253,

  FE: 254,

  FF: 255,
};

function decodeHex(e) {
  e = e.toUpperCase().replace(new RegExp("s/[^0-9A-Z]//g"));

  for (var t = "", n = "", a = 0; a < e.length; a++)
    2 == (n += e.charAt(a)).length && ((t += ntos(hexv[n])), (n = ""));

  return t;
}

var Utf8 = {
  encode: function (e) {
    e = e.replace(/\r\n/g, "\n");

    for (var t = "", n = 0; n < e.length; n++) {
      var a = e.charCodeAt(n);

      a < 128
        ? (t += String.fromCharCode(a))
        : (127 < a && a < 2048
            ? (t += String.fromCharCode((a >> 6) | 192))
            : ((t += String.fromCharCode((a >> 12) | 224)),
              (t += String.fromCharCode(((a >> 6) & 63) | 128))),
          (t += String.fromCharCode((63 & a) | 128)));
    }

    return t;
  },

  decode: function (e) {
    for (var t = "", n = 0, a = (c1 = c2 = 0); n < e.length; )
      (a = e.charCodeAt(n)) < 128
        ? ((t += String.fromCharCode(a)), n++)
        : 191 < a && a < 224
        ? ((c2 = e.charCodeAt(n + 1)),
          (t += String.fromCharCode(((31 & a) << 6) | (63 & c2))),
          (n += 2))
        : ((c2 = e.charCodeAt(n + 1)),
          (c3 = e.charCodeAt(n + 2)),
          (t += String.fromCharCode(
            ((15 & a) << 12) | ((63 & c2) << 6) | (63 & c3)
          )),
          (n += 3));

    return t;
  },
};

function setFocus(e, t) {
  e.setSelectionRange
    ? (e.focus(), e.setSelectionRange(t, t))
    : e.createTextRange &&
      ((e = e.createTextRange()).collapse(!0),
      e.moveEnd("character", t),
      e.moveStart("character", t),
      e.select());
}

function agregarHandlerCalendario(e) {
  var t = document.createElement("input");

  t.setAttribute("type", "date");

  e = e || $('input[type="date"]');

  "text" === t.type &&
    e.datepicker({
      changeMonth: !0,

      changeYear: !0,
    });
}

function ocultarCapasAdicionales() {
  var e = document.getElementById("capas_adicionales");

  if (e) {
    var t = e.value.split(","),
      n = t.length;

    for (i = 0; i < n; i++) {
      var a = document.getElementById(t[i]);

      a && (a.style.display = "none");
    }
  }
}

function seleccionarRegistro() {
  ocultarCapasAdicionales();

  var e = document.getElementById("capa_registros"),
    t = document.getElementById("capa_filtros"),
    n = document.getElementById("capa_nuevo_registro"),
    a = document.getElementById("bEliminar");

  e && (e.style.display = "none"),
    t && (t.style.display = "none"),
    n && (n.style.display = ""),
    a && (a.style.display = "");
}

function showNuevoRegistro() {
  ocultarCapasAdicionales();

  var e = document.getElementById("capa_registros"),
    t = document.getElementById("capa_nuevo_registro"),
    n = document.getElementById("capa_filtros"),
    a = document.getElementById("bEliminar");

  e && (e.style.display = "none"),
    n && (n.style.display = "none"),
    t && (t.style.display = ""),
    a && (a.style.display = "none"),
    "function" == typeof LimpiarTodo && LimpiarTodo();
}

function showFiltros() {
  ocultarCapasAdicionales();

  var e = document.getElementById("capa_registros"),
    t = document.getElementById("capa_filtros"),
    n = document.getElementById("capa_nuevo_registro"),
    a = document.getElementById("bEliminar");

  e && (e.style.display = "none"),
    t && (t.style.display = ""),
    n && (n.style.display = "none"),
    a && (a.style.display = "none"),
    "function" == typeof LimpiarTodo && LimpiarTodo();
}

function showRegistros() {
  ocultarCapasAdicionales();

  var e = document.getElementById("capa_registros"),
    t = document.getElementById("capa_filtros"),
    n = document.getElementById("capa_nuevo_registro"),
    a = document.getElementById("bEliminar");

  e && (e.style.display = ""),
    t && (t.style.display = "none"),
    n && (n.style.display = "none"),
    a && (a.style.display = "none");
}

function ocultarTodo() {
  ocultarCapasAdicionales();

  var e = document.getElementById("capa_registros"),
    t = document.getElementById("capa_filtros"),
    n = document.getElementById("capa_nuevo_registro"),
    a = document.getElementById("bEliminar");

  e && (e.style.display = "none"),
    t && (t.style.display = "none"),
    n && (n.style.display = "none"),
    a && (a.style.display = "none");
}

function cargarCSS(e, t) {
  t = t || "screen";

  for (
    var n,
      a = document.getElementsByTagName("link"),
      r = e.replace(/(http:\/\/|\.\/|\.\.\/|^\/)/g, ""),
      o = a.length - 1;
    0 <= o;
    o--
  )
    if (0 <= a[o].href.indexOf(r)) break;

  a[o] && 0 <= a[o].href.indexOf(r)
    ? (a[o].href = e + "?" + Math.floor(1e3 * Math.random() + 1))
    : (((n = document.createElement("link")).href = e),
      (n.media = t),
      (n.rel = "stylesheet"),
      (n.type = "text/css"),
      0 < (t = document.getElementsByTagName("head")).length &&
        t[0].appendChild(n));
}

jQuery(function (e) {
  e.datepicker &&
    ((e.datepicker.regional.es = {
      closeText: "Cerrar",

      prevText: "Anterior",

      nextText: "Siguiente",

      currentText: "Hoy",

      monthNames: [
        "Enero",
        "Febrero",
        "Marzo",
        "Abril",
        "Mayo",
        "Junio",
        "Julio",
        "Agosto",
        "Septiembre",
        "Octubre",
        "Noviembre",
        "Diciembre",
      ],

      monthNamesShort: [
        "Ene",
        "Feb",
        "Mar",
        "Abr",
        "May",
        "Jun",
        "Jul.",
        "Ago",
        "Sept",
        "Oct",
        "Nov",
        "Dic",
      ],

      dayNames: [
        "Domingo",
        "Lunes",
        "Martes",
        "Miércoles",
        "Jueves",
        "Viernes",
        "Sábado",
      ],

      dayNamesShort: ["Dom", "Lun", "Mar", "Miér", "Jue", "Vie", "Sab"],

      dayNamesMin: ["D", "L", "M", "M", "J", "V", "S"],

      weekHeader: "Sem",

      dateFormat: "dd/mm/yy",

      firstDay: 0,

      isRTL: !1,

      showMonthAfterYear: !1,

      yearSuffix: "",
    }),
    e.datepicker.setDefaults(e.datepicker.regional.es));
}),
  (function () {
    var e = $(document),
      a = 0;

    (window.mostrarMensaje = function (e) {
      var t = document.getElementById("contenedor_alerta"),
        n = document.getElementById("alerta_ajax");
      /*
      null == t &&
        (((t = document.createElement("div")).id = "contenedor_alerta"),
        (t.style.display = "none"),
        ((n = document.createElement("div")).className =
          "alert alert-info alert-dismissable"),
        (n.id = "alerta_ajax"),
        t.appendChild(n),
        document.body.appendChild(t),
        $(".alert").alert()),
        (n.innerHTML =
          '<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>' +
          e),
        (t.style.display = "");
        */
    }),
      /**(window.ocultarMensaje = function () {
        document.getElementById("contenedor_alerta").style.display = "none";
      }),*/
      e.ajaxSend(function (e, t, n) {
        return (
          0 < n.url.indexOf("chat_datos.php") ||
          (a++, void mostrarMensaje("Cargando..."))
        );
      }),
      e.ajaxComplete(function (e, t, n) {
        return (
          0 < n.url.indexOf("chat_datos.php") ||
          void (0 == --a && ocultarMensaje())
        );
      });
  })(),
  $(function () {
    $(".jcap-notificaciones").on(
      "click",
      ".dropdown-menu .hidden-xs a",
      function () {
        var n = this,
          e = {
            accion: "MarcarLeida",

            idnotificacion: this.getAttribute("n"),

            idusuario: document.getElementById("idusuario").value,

            idperfilusuario: document.getElementById("idperfilusuario").value,

            idorganismo: document.getElementById("idorganismo").value,
          };

        $.post(
          "../jcapnotificaciones/notificaciones_datos.php",
          e,
          function (e) {
            var t;

            e.estatus &&
              1 == e.estatus &&
              ($(n).parent().removeClass("bg-success"),
              (t = $(".jcap-notificaciones .dropdown-toggle .badge")),
              0 == e.cant && 0 < t.length
                ? (t.parent().append('<b class="caret"></b>'), t.remove())
                : 0 < e.cant && 0 < t.length
                ? t.html(e.cant)
                : 0 < e.cant &&
                  0 == t.length &&
                  ((t = $(".jcap-notificaciones .dropdown-toggle")),
                  $(".caret", t).remove(),
                  t.prepend(
                    '<span class="badge pull-right">' + e.cant + "</span>"
                  )));
          },
          "json"
        );
      }
    );
  });
