function actualizaEstatusGrupos() {
    var lengthGrupo = Model.data.length;
    for (var gx = 0; gx < lengthGrupo; gx++) {
        var lengthPregutas = Model.data[gx].preguntas.length;
        var indexOpcion;
        var contestadas = 1;
        for (var ix = 0; ix < lengthPregutas; ix++) {
            indexOpcion = Model.data[gx].preguntas[ix].opciones.findIndex(function(element) {
                return parseInt(element.valor) === 1
            });
            if (indexOpcion < 0) {
                contestadas = null
            }
        }
        Model.data[gx].contestadas = contestadas;
        if (Model.data[gx].contestadas == 1) {
            $("#grup_" + gx + " .glyphicon-record").addClass("hide");
            $("#grup_" + gx + " .glyphicon-ok").removeClass("hide")
        } else {
            $("#grup_" + gx + " .glyphicon-record").removeClass("hide");
            $("#grup_" + gx + " .glyphicon-ok").addClass("hide")
        }
    }
}
function actualizaEstatusPregunta() {
    var idgrupo = Model.current.idgrupo;
    var indexGrupo;
    indexGrupo = Model.data.findIndex(function(element) {
        return parseInt(element.idgrupo) === parseInt(idgrupo)
    });
    var lengthPregutas = Model.data[indexGrupo].preguntas.length;
    var indexOpcion;
    var idOpcion;
    var idPregunta;
    for (var ix = 0; ix < lengthPregutas; ix++) {
        indexOpcion = Model.data[indexGrupo].preguntas[ix].opciones.findIndex(function(element) {
            return parseInt(element.valor) === 1
        });
        if (indexOpcion >= 0) {
            idPregunta = Model.data[indexGrupo].preguntas[ix].idpregunta;
            idOpcion = Model.data[indexGrupo].preguntas[ix].opciones[indexOpcion].idopcion;
            $("#select_" + idPregunta).val(idOpcion).change();
            $("#area_" + idPregunta + " .glyphicon-record").addClass("hide");
            $("#area_" + idPregunta + " .glyphicon-ok").removeClass("hide")
        }
    }
}
function activaAPIModel(api) {
    Model = {
        data: null,
        current: {
            idtest: null,
            idgrupo: null,
            idempresa: null,
            result: null
        },
        content: null,
        objects: {
            pais: null,
            disponibilidad: null,
            educacion: null,
            experiencia: null,
            jornada: null,
            perfil: null,
            puesto: null,
            salario: null,
            sector: null,
            situacion: null,
            empresas: null
        },
        temas: null
    };
    var param1 = btoa(JSON.stringify({
        accion: "actualizaModel",
        idtest: "1"
    }));
    var param2 = btoa(JSON.stringify({
        accion: "getContenidoInicial",
        idtest: "1"
    }));
    var param3 = btoa(JSON.stringify({
        accion: "getObjetoPais"
    }));
    var param4 = btoa(JSON.stringify({
        accion: "getObjetoDisponibilidad"
    }));
    var param5 = btoa(JSON.stringify({
        accion: "getObjetoEducacion"
    }));
    var param6 = btoa(JSON.stringify({
        accion: "getObjetoExperiencia"
    }));
    var param7 = btoa(JSON.stringify({
        accion: "getObjetoJornada"
    }));
    var param8 = btoa(JSON.stringify({
        accion: "getObjetoPerfil"
    }));
    var param9 = btoa(JSON.stringify({
        accion: "getObjetoPuesto"
    }));
    var param10 = btoa(JSON.stringify({
        accion: "getObjetoSalario"
    }));
    var param11 = btoa(JSON.stringify({
        accion: "getObjetoSector"
    }));
    var param12 = btoa(JSON.stringify({
        accion: "getObjetoSituacion"
    }));
    var param13 = btoa(JSON.stringify({
        accion: "getEmpresas"
    }));
    var param14 = btoa(JSON.stringify({
        accion: "getObjetoProvincia"
    }));
    var param15 = btoa(JSON.stringify({
        accion: "getObjetoLocalidad"
    }));
    var param16 = btoa(JSON.stringify({
        accion: "getDepartamentos"
    }));
    getContentModel("data", api, param1).then(resultData1=>{
       Model.data = resultData1;
        getContentModel("content", api, param2).then(resultData2=>{
            Model.content = resultData2;
            getContentModel("pais", api, param3).then(resultData3=>{
                Model.objects.pais = resultData3;
                getContentModel("disponibilidad", api, param4).then(resultData4=>{
                    Model.objects.disponibilidad = resultData4;
                    getContentModel("educacion", api, param5).then(resultData5=>{
                        Model.objects.educacion = resultData5;
                        getContentModel("experiencia", api, param6).then(resultData6=>{
                            Model.objects.experiencia = resultData6;
                            getContentModel("jornada", api, param7).then(resultData7=>{
                                Model.objects.jornada = resultData7;
                                getContentModel("perfil", api, param8).then(resultData8=>{
                                    Model.objects.perfil = resultData8;
                                    getContentModel("puesto", api, param9).then(resultData9=>{
                                        Model.objects.puesto = resultData9;
                                        getContentModel("salario", api, param10).then(resultData10=>{
                                            Model.objects.salario = resultData10;
                                            getContentModel("sector", api, param11).then(resultData11=>{
                                                Model.objects.sector = resultData11;
                                                getContentModel("situacion", api, param12).then(resultData12=>{
                                                    Model.objects.situacion = resultData12;
                                                    getContentModel("empresas", api, param13).then(resultData13=>{
                                                        Model.objects.empresas = resultData13;
                                                        getContentModel("provincia", api, param14).then(resultData14=>{
                                                            Model.objects.provincia = resultData14;
                                                            getContentModel("localidad", api, param15).then(resultData15=>{
                                                                Model.objects.localidad = resultData15;
                                                                getContentModel("departamentos", api, param16).then(resultData16=>{
                                                                    Model.objects.departamentos = resultData16
                                                                }
                                                                )
                                                            }
                                                            )
                                                        }
                                                        )
                                                    }
                                                    )
                                                }
                                                )
                                            }
                                            )
                                        }
                                        )
                                    }
                                    )
                                }
                                )
                            }
                            )
                        }
                        )
                    }
                    )
                }
                )
            }
            )
        }
        )
    }
    )
}
